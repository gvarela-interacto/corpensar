{% load static %}
<nav class="navbar default-layout col-lg-12 col-12 p-0 fixed-top d-flex align-items-top flex-row">
      <div class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-start interHeader" style="box-shadow: 0 2px 15px rgba(0,0,0,0.05); backdrop-filter: blur(10px); background-color: rgba(255,255,255,0.95);">
        <div class="me-3">
          <button class="navbar-toggler navbar-toggler align-self-center toggle-sidebar" type="button" data-bs-toggle="minimize" style="transition: all 0.3s ease; border-radius: 8px; padding: 5px; background: var(--primary-color);">
            <span class="icon-menu" style="color: #000;"></span>
          </button>
        </div>
        <div class="d-lg-block d-none">
          <a class="navbar-brand brand-logo" href="{% if user.is_authenticated %}{% url 'index' %}{% else %}{% url 'public_home' %}{% endif %}" style="transition: all 0.3s ease;">
            <img src="http://72.14.187.231/corpensar/images/logoappw.png" style="width: 110px; height: auto; filter: drop-shadow(0 2px 5px rgba(0,0,0,0.1));" alt="logo" />
          </a>
        </div>
      </div>
      <div class="navbar-menu-wrapper d-flex align-items-top justify-content-between interHeader" style="box-shadow: 0 2px 15px rgba(0,0,0,0.05); backdrop-filter: blur(10px); background-color: rgba(255,255,255,0.95);">
        <ul class="navbar-nav">
          <li class="nav-item font-weight-semibold d-none d-lg-block ms-0">
            <h1 class="welcome-text" style="font-size: 1.4rem; letter-spacing: -0.5px; margin-bottom: 0;">
                Bienvenido, 
                <span class="text-black fw-bold" style="background: linear-gradient(120deg, #ffd700, #f2c94c); -webkit-background-clip: text; -webkit-text-fill-color: transparent; animation: gradient 3s ease infinite;">
                    {% if user.is_authenticated %}
                        {{ user.first_name }} {{ user.last_name }}
                    {% else %}
                        Invitado
                    {% endif %}
                </span>
            </h1>
          </li>
        </ul>
        
        <ul class="navbar-nav ms-auto">
          {% if user.is_authenticated %}
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color: #333; font-weight: 500;">
              Mi Cuenta
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown" style="border-radius: 12px; border: none; box-shadow: 0 5px 20px rgba(0,0,0,0.15); padding: 8px;">
              <li><a class="dropdown-item" href="{% url 'index' %}" style="padding: 8px 16px; border-radius: 8px;"><i class="mdi mdi-view-dashboard me-2"></i> Dashboard</a></li>
              <li><a class="dropdown-item" href="{% url 'lista_encuestas' %}" style="padding: 8px 16px; border-radius: 8px;"><i class="mdi mdi-file-document me-2"></i> Mis Encuestas</a></li>
              <li><hr class="dropdown-divider" style="margin: 8px 0;"></li>
              <li><a class="dropdown-item" href="{% url 'public_home' %}" style="padding: 8px 16px; border-radius: 8px;"><i class="mdi mdi-home me-2"></i> Página Pública</a></li>
              <li><a class="dropdown-item" href="{% url 'logout' %}" style="padding: 8px 16px; border-radius: 8px;"><i class="mdi mdi-logout me-2"></i> Cerrar Sesión</a></li>
            </ul>
          </li>
          {% else %}
          <li class="nav-item">
            <a href="{% url 'login' %}" class="nav-link btn" style="background-color: var(--primary-color); color: #000; font-weight: 600; padding: 8px 20px; border-radius: 10px; margin-right: 10px;">
              <i class="mdi mdi-login me-1"></i> Iniciar Sesión
            </a>
          </li>
          <li class="nav-item">
            <a href="{% url 'public_home' %}" class="nav-link" style="color: #333; font-weight: 500;">
              <i class="mdi mdi-home me-1"></i> Inicio
            </a>
          </li>
          {% endif %}
        </ul>
        
        <div class="d-lg-none d-flex align-items-center">
          <a class="navbar-brand brand-logo me-3" href="{% if user.is_authenticated %}{% url 'index' %}{% else %}{% url 'public_home' %}{% endif %}" style="transition: all 0.3s ease;">
            <img src="/static/images/logo corpensar-12.webp" style="width: 90px; height: auto; filter: drop-shadow(0 2px 5px rgba(0,0,0,0.1));" alt="logo" />
          </a>
          <button class="navbar-toggler navbar-toggler-right align-self-center toggle-sidebar" type="button" data-bs-toggle="offcanvas" style="transition: all 0.3s ease; border-radius: 8px; padding: 5px; background: var(--primary-color);">
            <span class="mdi mdi-menu" style="color: #000;"></span>
          </button>
        </div>
      </div>
      <style>
        @keyframes gradient {
          0% {
            background-position: 0% 50%;
          }
          50% {
            background-position: 100% 50%;
          }
          100% {
            background-position: 0% 50%;
          }
        }
        
        /* Estilos para dropdown */
        .dropdown-menu {
          animation: fadeIn 0.2s ease;
        }
        
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        
        .dropdown-item:hover {
          background-color: rgba(255, 215, 0, 0.15);
          transform: translateX(3px);
          transition: all 0.2s ease;
        }
      </style>
    </nav>
    
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Obtener todos los botones de alternar sidebar
    const toggleButtons = document.querySelectorAll('.toggle-sidebar');
    
    // Añadir el event listener a cada botón
    toggleButtons.forEach(button => {
        button.addEventListener('click', function() {
            document.body.classList.toggle('sidebar-open');
        });
    });
    
    // Inicializar los dropdowns de Bootstrap
    var dropdownElementList = [].slice.call(document.querySelectorAll('.dropdown-toggle'))
    var dropdownList = dropdownElementList.map(function (dropdownToggleEl) {
      return new bootstrap.Dropdown(dropdownToggleEl)
    });
});
</script>